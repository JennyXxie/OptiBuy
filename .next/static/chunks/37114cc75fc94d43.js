(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37586,e=>{"use strict";e.s(["Card",()=>t,"CardContent",()=>l,"CardHeader",()=>r,"CardTitle",()=>i]);var s=e.i(40577),a=e.i(84858);function t(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function r(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},48298,e=>{"use strict";e.s(["Badge",()=>l]);var s=e.i(40577),a=e.i(72062),t=e.i(81020),r=e.i(84858);let i=(0,t.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:l,asChild:n=!1,...d}=e,c=n?a.Slot:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,r.cn)(i({variant:l}),t),...d})}},37744,e=>{"use strict";e.s(["Input",()=>t]);var s=e.i(40577),a=e.i(84858);function t(e){let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}},22779,e=>{"use strict";e.s(["TrendingDown",()=>s],22779);let s=(0,e.i(90638).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},3927,65241,e=>{"use strict";e.s(["ExternalLink",()=>a],3927);var s=e.i(90638);let a=(0,s.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["Star",()=>t],65241);let t=(0,s.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},81995,e=>{"use strict";e.s(["default",()=>b],81995);var s=e.i(40577),a=e.i(6468),t=e.i(97608),r=e.i(13493),i=e.i(90638);let l=(0,i.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),n=(0,i.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),d=(0,i.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),c=(0,i.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var o=e.i(57546),m=e.i(37744),x=e.i(37586),u=e.i(48298);function h(e){let{content:a,className:t=""}=e,r=a.split("\n\n").map(e=>(e=>{let s,a=/\[([^\]]+)\]\(([^)]+)\)/g,t=/\*\*([^*]+)\*\*/g,r=[],i=0;for(;null!==(s=a.exec(e));){if(s.index>i){let a=e.slice(i,s.index);r.push({type:"text",content:a})}r.push({type:"link",text:s[1],url:s[2]}),i=s.index+s[0].length}return i<e.length&&r.push({type:"text",content:e.slice(i)}),r.map(e=>"text"===e.type?{...e,content:e.content.replace(t,"<strong>$1</strong>")}:e)})(e.trim()));return(0,s.jsx)("div",{className:"".concat(t," space-y-3"),children:r.map((e,a)=>(0,s.jsx)("div",{className:"space-y-2",children:e.map((e,a)=>"link"===e.type?(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:e.text})},a):(0,s.jsx)("div",{className:"leading-relaxed",dangerouslySetInnerHTML:{__html:e.content.replace(/\n/g,"<br />")}},a))},a))})}var p=e.i(3927),g=e.i(65241),f=e.i(22779);let v=(0,i.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function j(e){let{products:t,query:r}=e,[i,l]=(0,a.useState)(null);return((0,a.useEffect)(()=>{t.length>0&&!i&&l(t[0])},[t,i]),0===t.length)?(0,s.jsxs)(x.Card,{className:"h-full",children:[(0,s.jsx)(x.CardHeader,{children:(0,s.jsxs)(x.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(v,{className:"h-5 w-5 text-muted-foreground"}),"No Products Found"]})}),(0,s.jsx)(x.CardContent,{children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Search for products to see detailed information here."})})]}):(0,s.jsxs)("div",{className:"h-full flex flex-col space-y-4",children:[(0,s.jsxs)(x.Card,{children:[(0,s.jsx)(x.CardHeader,{children:(0,s.jsxs)(x.CardTitle,{className:"text-lg",children:['Products for "',r,'"']})}),(0,s.jsx)(x.CardContent,{children:(0,s.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.slice(0,5).map((e,a)=>(0,s.jsx)("div",{className:"p-3 rounded-lg border cursor-pointer transition-colors ".concat((null==i?void 0:i.name)===e.name?"bg-primary/10 border-primary":"bg-muted/50 hover:bg-muted"),onClick:()=>l(e),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-sm truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("span",{className:"font-bold text-primary",children:["$",e.price]}),(0,s.jsx)(u.Badge,{variant:"outline",className:"text-xs",children:e.platform})]})]}),(0,s.jsxs)("div",{className:"ml-2",children:[0===a&&(0,s.jsx)(u.Badge,{className:"bg-yellow-500",children:"ðŸ¥‡ Best"}),1===a&&(0,s.jsx)(u.Badge,{variant:"secondary",children:"ðŸ¥ˆ"}),2===a&&(0,s.jsx)(u.Badge,{variant:"secondary",children:"ðŸ¥‰"})]})]})},a))})})]}),i&&(0,s.jsxs)(x.Card,{className:"flex-1",children:[(0,s.jsx)(x.CardHeader,{children:(0,s.jsxs)(x.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(p.ExternalLink,{className:"h-5 w-5"}),"Product Details"]})}),(0,s.jsxs)(x.CardContent,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:i.image?(0,s.jsx)("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover rounded-lg"}):(0,s.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-muted-foreground/20 rounded-lg mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm",children:"No image available"})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg leading-tight",children:i.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsxs)("span",{className:"text-2xl font-bold text-primary",children:["$",i.price]}),(0,s.jsx)(u.Badge,{variant:"outline",children:i.platform})]})]}),i.rating&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(g.Star,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,s.jsx)("span",{className:"font-medium",children:i.rating})]}),i.reviews&&(0,s.jsxs)("span",{className:"text-muted-foreground text-sm",children:["(",i.reviews," reviews)"]})]}),i.savings&&i.savings>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,s.jsx)(f.TrendingDown,{className:"h-4 w-4"}),(0,s.jsxs)("span",{className:"font-medium",children:["Save $",i.savings.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.Button,{asChild:!0,className:"w-full",size:"lg",children:(0,s.jsxs)("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(p.ExternalLink,{className:"h-4 w-4"}),"View on ",i.platform]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(o.Button,{variant:"outline",size:"sm",children:"Set Price Alert"}),(0,s.jsx)(o.Button,{variant:"outline",size:"sm",children:"Add to Watchlist"})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Price Comparison"}),(0,s.jsx)("div",{className:"space-y-2",children:t.filter(e=>e.name.toLowerCase().includes(i.name.toLowerCase().split(" ")[0])).slice(0,3).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Badge,{variant:"outline",className:"text-xs",children:e.platform}),(0,s.jsxs)("span",{className:"text-sm truncate max-w-32",children:[e.name.split(" ").slice(0,3).join(" "),"..."]})]}),(0,s.jsxs)("span",{className:"font-medium",children:["$",e.price]})]},a))})]})]})]})]})]})}let y=[{id:"1",role:"assistant",content:"Hi! I'm DealBot, your AI shopping assistant. I can help you find the best deals, compare prices across platforms, and give you personalized shopping recommendations. What are you looking for today?",timestamp:new Date}];function b(){let[e,i]=(0,a.useState)(y),[p,g]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1),[b,N]=(0,a.useState)([]),[w,k]=(0,a.useState)(""),C=(0,a.useRef)(null),S=(0,r.useSearchParams)().get("q");(0,a.useEffect)(()=>{var e;null==(e=C.current)||e.scrollIntoView({behavior:"smooth"}),S&&!p&&g(S)},[e,S,p]),(0,a.useEffect)(()=>{S&&p===S&&!f&&1===e.length&&B()},[S,p,f,e.length]);let B=async()=>{if(!p.trim()||f)return;let e={id:Date.now().toString(),role:"user",content:p.trim(),timestamp:new Date};i(s=>[...s,e]),g(""),v(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:p.trim(),sessionId:sessionStorage.getItem("chatSessionId")||void 0})}),s=await e.json();if(s.success){let e=[];s.data.products&&(e=s.data.products,N(e),k(p.trim()));let a={id:(Date.now()+1).toString(),role:"assistant",content:s.data.response,timestamp:new Date(s.data.timestamp),products:e};i(e=>[...e,a]),s.data.sessionId&&sessionStorage.setItem("chatSessionId",s.data.sessionId)}else throw Error(s.error||"Failed to get response")}catch(s){console.error("Chat API error:",s);let e={id:(Date.now()+1).toString(),role:"assistant",content:"I'm sorry, I'm having trouble processing your request right now. Please try again later.",timestamp:new Date};i(s=>[...s,e])}finally{v(!1)}};return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[(0,s.jsx)(t.default,{src:"/logo.png",alt:"OptiBuy Logo",width:40,height:40,className:"h-10 w-10 object-contain"}),(0,s.jsx)(c,{className:"h-8 w-8 text-primary"}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"DealBot Assistant"})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your AI-powered shopping companion for finding the best deals"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[700px]",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(x.Card,{className:"h-full flex flex-col",children:(0,s.jsxs)(x.CardContent,{className:"flex-1 flex flex-col p-0",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.map(e=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"flex max-w-[80%] ".concat("user"===e.role?"flex-row-reverse":"flex-row"," items-start space-x-2"),children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary text-primary-foreground":"bg-muted"),children:"user"===e.role?(0,s.jsx)(d,{className:"h-4 w-4"}):(0,s.jsx)(n,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,s.jsx)(h,{content:e.content,className:"text-sm"}),(0,s.jsx)("div",{className:"text-xs mt-1 opacity-70 ".concat("user"===e.role?"text-right":"text-left"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},e.id)),f&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:(0,s.jsx)(n,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"bg-muted rounded-lg px-4 py-2",children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),(0,s.jsx)("div",{ref:C})]}),(0,s.jsxs)("div",{className:"border-t p-4",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(m.Input,{value:p,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B())},placeholder:"Ask me about deals, compare prices, or get recommendations...",className:"flex-1",disabled:f}),(0,s.jsx)(o.Button,{onClick:B,disabled:!p.trim()||f,size:"icon",children:(0,s.jsx)(l,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[(0,s.jsx)(u.Badge,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>g("Show me the best laptop deals"),children:"ðŸ’» Laptop deals"}),(0,s.jsx)(u.Badge,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>g("Find wireless headphones under $50"),children:"ðŸŽ§ Headphones"}),(0,s.jsx)(u.Badge,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>g("What are today's best deals?"),children:"ðŸ”¥ Today's deals"}),(0,s.jsx)(u.Badge,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>g("Compare iPhone prices"),children:"ðŸ“± iPhone prices"})]})]})]})})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)(j,{products:b||[],query:w})})]})]})}}]);