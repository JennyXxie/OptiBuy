module.exports=[74809,a=>{"use strict";a.s(["default",()=>v],74809);var b=a.i(52928),c=a.i(13605),d=a.i(11330),e=a.i(46857),f=a.i(47213);let g=(0,f.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),h=(0,f.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),i=(0,f.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),j=(0,f.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var k=a.i(50443),l=a.i(81817),m=a.i(66847),n=a.i(23738);function o({content:a,className:c=""}){let d=a.split("\n\n").map(a=>(a=>{let b,c=/\[([^\]]+)\]\(([^)]+)\)/g,d=/\*\*([^*]+)\*\*/g,e=[],f=0;for(;null!==(b=c.exec(a));){if(b.index>f){let c=a.slice(f,b.index);e.push({type:"text",content:c})}e.push({type:"link",text:b[1],url:b[2]}),f=b.index+b[0].length}return f<a.length&&e.push({type:"text",content:a.slice(f)}),e.map(a=>"text"===a.type?{...a,content:a.content.replace(d,"<strong>$1</strong>")}:a)})(a.trim()));return(0,b.jsx)("div",{className:`${c} space-y-3`,children:d.map((a,c)=>(0,b.jsx)("div",{className:"space-y-2",children:a.map((a,c)=>"link"===a.type?(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:a.text})},c):(0,b.jsx)("div",{className:"leading-relaxed",dangerouslySetInnerHTML:{__html:a.content.replace(/\n/g,"<br />")}},c))},c))})}var p=a.i(81819),q=a.i(76348),r=a.i(85285);let s=(0,f.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function t({products:a,query:d}){let[e,f]=(0,c.useState)(null);return((0,c.useEffect)(()=>{a.length>0&&!e&&f(a[0])},[a,e]),0===a.length)?(0,b.jsxs)(m.Card,{className:"h-full",children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsxs)(m.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s,{className:"h-5 w-5 text-muted-foreground"}),"No Products Found"]})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Search for products to see detailed information here."})})]}):(0,b.jsxs)("div",{className:"h-full flex flex-col space-y-4",children:[(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsxs)(m.CardTitle,{className:"text-lg",children:['Products for "',d,'"']})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:a.slice(0,5).map((a,c)=>(0,b.jsx)("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${e?.name===a.name?"bg-primary/10 border-primary":"bg-muted/50 hover:bg-muted"}`,onClick:()=>f(a),children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-sm truncate",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsxs)("span",{className:"font-bold text-primary",children:["$",a.price]}),(0,b.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:a.platform})]})]}),(0,b.jsxs)("div",{className:"ml-2",children:[0===c&&(0,b.jsx)(n.Badge,{className:"bg-yellow-500",children:"ðŸ¥‡ Best"}),1===c&&(0,b.jsx)(n.Badge,{variant:"secondary",children:"ðŸ¥ˆ"}),2===c&&(0,b.jsx)(n.Badge,{variant:"secondary",children:"ðŸ¥‰"})]})]})},c))})})]}),e&&(0,b.jsxs)(m.Card,{className:"flex-1",children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsxs)(m.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.ExternalLink,{className:"h-5 w-5"}),"Product Details"]})}),(0,b.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:e.image?(0,b.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded-lg"}):(0,b.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-muted-foreground/20 rounded-lg mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm",children:"No image available"})]})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg leading-tight",children:e.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsxs)("span",{className:"text-2xl font-bold text-primary",children:["$",e.price]}),(0,b.jsx)(n.Badge,{variant:"outline",children:e.platform})]})]}),e.rating&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.Star,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,b.jsx)("span",{className:"font-medium",children:e.rating})]}),e.reviews&&(0,b.jsxs)("span",{className:"text-muted-foreground text-sm",children:["(",e.reviews," reviews)"]})]}),e.savings&&e.savings>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,b.jsx)(r.TrendingDown,{className:"h-4 w-4"}),(0,b.jsxs)("span",{className:"font-medium",children:["Save $",e.savings.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Button,{asChild:!0,className:"w-full",size:"lg",children:(0,b.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(p.ExternalLink,{className:"h-4 w-4"}),"View on ",e.platform]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsx)(k.Button,{variant:"outline",size:"sm",children:"Set Price Alert"}),(0,b.jsx)(k.Button,{variant:"outline",size:"sm",children:"Add to Watchlist"})]})]}),(0,b.jsxs)("div",{className:"pt-4 border-t",children:[(0,b.jsx)("h4",{className:"font-medium mb-2",children:"Price Comparison"}),(0,b.jsx)("div",{className:"space-y-2",children:a.filter(a=>a.name.toLowerCase().includes(e.name.toLowerCase().split(" ")[0])).slice(0,3).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:a.platform}),(0,b.jsxs)("span",{className:"text-sm truncate max-w-32",children:[a.name.split(" ").slice(0,3).join(" "),"..."]})]}),(0,b.jsxs)("span",{className:"font-medium",children:["$",a.price]})]},c))})]})]})]})]})]})}let u=[{id:"1",role:"assistant",content:"Hi! I'm DealBot, your AI shopping assistant. I can help you find the best deals, compare prices across platforms, and give you personalized shopping recommendations. What are you looking for today?",timestamp:new Date}];function v(){let[a,f]=(0,c.useState)(u),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(""),z=(0,c.useRef)(null),A=(0,e.useSearchParams)().get("q");(0,c.useEffect)(()=>{z.current?.scrollIntoView({behavior:"smooth"}),A&&!p&&q(A)},[a,A,p]),(0,c.useEffect)(()=>{A&&p===A&&!r&&1===a.length&&B()},[A,p,r,a.length]);let B=async()=>{if(!p.trim()||r)return;let a={id:Date.now().toString(),role:"user",content:p.trim(),timestamp:new Date};f(b=>[...b,a]),q(""),s(!0);try{let a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:p.trim(),sessionId:sessionStorage.getItem("chatSessionId")||void 0})}),b=await a.json();if(b.success){let a=[];b.data.products&&(a=b.data.products,w(a),y(p.trim()));let c={id:(Date.now()+1).toString(),role:"assistant",content:b.data.response,timestamp:new Date(b.data.timestamp),products:a};f(a=>[...a,c]),b.data.sessionId&&sessionStorage.setItem("chatSessionId",b.data.sessionId)}else throw Error(b.error||"Failed to get response")}catch(b){console.error("Chat API error:",b);let a={id:(Date.now()+1).toString(),role:"assistant",content:"I'm sorry, I'm having trouble processing your request right now. Please try again later.",timestamp:new Date};f(b=>[...b,a])}finally{s(!1)}};return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[(0,b.jsx)(d.default,{src:"/logo.png",alt:"OptiBuy Logo",width:40,height:40,className:"h-10 w-10 object-contain"}),(0,b.jsx)(j,{className:"h-8 w-8 text-primary"}),(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"DealBot Assistant"})]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Your AI-powered shopping companion for finding the best deals"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[700px]",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)(m.Card,{className:"h-full flex flex-col",children:(0,b.jsxs)(m.CardContent,{className:"flex-1 flex flex-col p-0",children:[(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.map(a=>(0,b.jsx)("div",{className:`flex ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`flex max-w-[80%] ${"user"===a.role?"flex-row-reverse":"flex-row"} items-start space-x-2`,children:[(0,b.jsx)("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${"user"===a.role?"bg-primary text-primary-foreground":"bg-muted"}`,children:"user"===a.role?(0,b.jsx)(i,{className:"h-4 w-4"}):(0,b.jsx)(h,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:`rounded-lg px-4 py-2 ${"user"===a.role?"bg-primary text-primary-foreground":"bg-muted"}`,children:[(0,b.jsx)(o,{content:a.content,className:"text-sm"}),(0,b.jsx)("div",{className:`text-xs mt-1 opacity-70 ${"user"===a.role?"text-right":"text-left"}`,children:a.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},a.id)),r&&(0,b.jsx)("div",{className:"flex justify-start",children:(0,b.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:(0,b.jsx)(h,{className:"h-4 w-4"})}),(0,b.jsx)("div",{className:"bg-muted rounded-lg px-4 py-2",children:(0,b.jsxs)("div",{className:"flex space-x-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),(0,b.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,b.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),(0,b.jsx)("div",{ref:z})]}),(0,b.jsxs)("div",{className:"border-t p-4",children:[(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(l.Input,{value:p,onChange:a=>q(a.target.value),onKeyPress:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),B())},placeholder:"Ask me about deals, compare prices, or get recommendations...",className:"flex-1",disabled:r}),(0,b.jsx)(k.Button,{onClick:B,disabled:!p.trim()||r,size:"icon",children:(0,b.jsx)(g,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[(0,b.jsx)(n.Badge,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>q("Show me the best laptop deals"),children:"ðŸ’» Laptop deals"}),(0,b.jsx)(n.Badge,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>q("Find wireless headphones under $50"),children:"ðŸŽ§ Headphones"}),(0,b.jsx)(n.Badge,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>q("What are today's best deals?"),children:"ðŸ”¥ Today's deals"}),(0,b.jsx)(n.Badge,{variant:"outline",className:"cursor-pointer hover:bg-muted",onClick:()=>q("Compare iPhone prices"),children:"ðŸ“± iPhone prices"})]})]})]})})}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)(t,{products:v||[],query:x})})]})]})}}];

//# sourceMappingURL=Desktop_website_OptiBuy_src_app_chat_page_tsx_0f7bc8ba._.js.map